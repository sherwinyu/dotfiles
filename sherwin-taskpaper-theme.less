// Stored at  one of
//   ~/Library/Containers/com.hogbaysoftware.TaskPaper3/Data/Library/Application Support/TaskPaper/StyleSheets/
//   ~/Library/Containers/com.hogbaysoftware.TaskPaper3/Data/Library/Application Support/TaskPaper/StyleSheets/
// NOTE -- it appears SYMLINKING the file (`ln -s ~/dotfiles/sherwin-taskpaper-theme.less . ` from
// the StyleSheets directory does NOT work -- it can't be a symlink!)

// Font settings (you can change these to your preference)
// --------------------------------------------------------------------------
@font-family: 'SF Text Light';
@line-height-multiple: 1.3;
// @font-family: 'SF Mono';
// @line-height-multiple: 1.4;

// ====================== Do not edit below this line =======================

// Omnifocus
// --------------------------------------------------------------------------
// Based on Matt Gemmell's OmniFocus-inspired stylesheet for Taskpaper
// https://mattgemmell.com/taskpaper-3/
// --------------------------------------------------------------------------
@background-color: #f7f7f7;
@tint-color: #8c19ff;
@heading-color: #2600cf;
@note-fg-color: #666;
@note-bg-color: #fffab9;
@link-color: blue;
@tag-fg-color: @tint-color;
@tag-bg-color: @background-color;

@text-color: hsla(hue(@background-color), saturation(@background-color), 100 - lightness(@background-color), .92);
@mute-color: hsla(hue(@text-color), saturation(@text-color), lightness(@text-color), .5); // mix(@text-color, @background-color, 50%);
@handle-color: mix(@tint-color, @background-color, 75%);
@handle-secondary-color: mix(@tint-color, @background-color, 50%);
// Settings
// --------------------------------------------------------------------------
@font-family-header: @font-family;
@font-family-note: @font-family;
@font-size: @user-font-size;
@font-size-header: @user-font-size * 20/18;
@note-font-size: @user-font-size;
@tag-font-size: @user-font-size * 16/18;
@padding: @font-size * @line-height-multiple / 8;
// @selection-color: mix(@tint-color, @background-color, 30%); // default
// @invisibles-color: mix(@tint-color, @background-color, 70%); // default

// Styles
// --------------------------------------------------------------------------

// Typewriter-mode
editor {
  typewriter-scroll-percent: 50%;
  bottom-padding-percent: 50%;
}

editor {
  // item-indent: @font-size;
  line-height-multiple: @line-height-multiple;
  guide-line-color: mix(@mute-color, @background-color, 10%);
  editor-wrap-to-column: 105;
  item-wrap-to-column: 90;
}

item[data-type=project] {
  color: @heading-color;
  font-family: @font-family-header;
  font-size: @font-size-header;
  font-weight: normal;
}

item {
  paragraph-spacing-before: @padding;
  paragraph-spacing-after: @padding;
}

item[data-type=project] {
  paragraph-spacing-before: @padding * 2;
  paragraph-spacing-after: @padding * 2;
}

item[data-type='note'] {
  // paragraph-spacing-after: @font-size;
  font-family: @font-family-note;
   > run[content] {
    background-color: @note-bg-color;
    color: @note-fg-color;
    font-size: @note-font-size;
    font-style: normal;
    // font-size: @user-font-size;
  }
}

run[link] {
  color: @link-color;
  text-decoration: underline;
}

run[link^='button'] {
  color: @mute-color;
  font-weight: normal;
  text-decoration: none;
}

// run[link^="filter"] {
//   color: @mute-color;
//   text-decoration: none;
// }

run[tag],
item[data-type='note'] > run[tag] {
  background-color: @tag-bg-color;
  color: @tag-fg-color;
  font-size: @tag-font-size;
  text-decoration: none;
}
/////-------------- Sherwin's contributions below

item[data-today] {
  font-weight: bold;
}

@color-p1: rgb(255, 0, 0);
@color-p2: rgb(224, 62, 62);
@color-p3: rgb(204, 108, 108);
@color-p4: rgb(183, 134, 134);
@color-today: rgb(226, 154, 9);
@color-chore: rgb(196, 178, 88);
@color-p1-muted: mix(@color-p1, @background-color, 50%);
@color-p2-muted: mix(@color-p2, @background-color, 50%);
@color-p3-muted: mix(@color-p3, @background-color, 50%);
@color-p4-muted: mix(@color-p4, @background-color, 50%);

item[data-p1] {
  color: @color-p1;
}
item[data-p2] {
  color: @color-p2;
}
item[data-p3] {
  color: @color-p3;
}
item[data-p4] {
  color: @color-p4;
}


run[tag=data-p1] {
  color: @color-p1-muted;
}
run[tag=data-p2] {
  color: @color-p2-muted;
}
run[tag=data-p3] {
  color: @color-p3-muted;
}
run[tag=data-p4] {
  color: @color-p4-muted;
}
run[tag=data-today] {
  color: @color-today;
  font-weight: bold;
}
run[tag=data-chore] {
  color: @color-chore;
}

item[data-done] {
   > run[content] {
    color: @mute-color;
    font-style: italic;
    font-weight: light;

    text-strikethrough-color: @mute-color;
  }
}

