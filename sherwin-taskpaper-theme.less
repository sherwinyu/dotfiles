// Stored at  one of
//   ~/Library/Containers/com.hogbaysoftware.TaskPaper3/Data/Library/Application Support/TaskPaper/StyleSheets/
//   ~/Library/Containers/com.hogbaysoftware.TaskPaper3/Data/Library/Application Support/TaskPaper/StyleSheets/
//   /Users/sherwin/Library/Containers/com.hogbaysoftware.TaskPaper3/Data/Library/Application Support/TaskPaper/StyleSheets
// NOTE -- it appears SYMLINKING the file (`ln -s ~/dotfiles/sherwin-taskpaper-theme.less . ` from
// the StyleSheets directory does NOT work -- it can't be a symlink!)

// Font settings (you can change these to your preference)
// --------------------------------------------------------------------------
@font-family: 'Source Sans Pro';
/* @font-family: 'SF Text Light'; */
@line-height-multiple: 1.3;
// @font-family: 'SF Mono';
// @line-height-multiple: 1.4;

// ====================== Do not edit below this line =======================

// Omnifocus
// --------------------------------------------------------------------------
// Based on Matt Gemmell's OmniFocus-inspired stylesheet for Taskpaper
// https://mattgemmell.com/taskpaper-3/
// --------------------------------------------------------------------------
@background-color: #f7f7f7;
@tint-color: #8c19ff;
@note-fg-color: #666;
@note-bg-color: #fffab9;
@link-color: blue;
@tag-fg-color: @tint-color;
@tag-bg-color: @background-color;

@text-color: hsla(hue(@background-color), saturation(@background-color), 100 - lightness(@background-color), .92);
@mute-color: hsla(hue(@text-color), saturation(@text-color), lightness(@text-color), .5); // mix(@text-color, @background-color, 50%);
@handle-color: mix(@tint-color, @background-color, 75%);
@handle-secondary-color: mix(@tint-color, @background-color, 50%);
// Settings
// --------------------------------------------------------------------------
@font-family-header: @font-family;
@font-family-note: @font-family;
@font-size: @user-font-size;
@font-size-header: @user-font-size * 22/18;
@note-font-size: @user-font-size;
@tag-font-size: @user-font-size * 16/18;
@padding: @font-size * @line-height-multiple / 12;

// Styles
// --------------------------------------------------------------------------


editor {
  /* item-indent: @font-size*2; */
  line-height-multiple: @line-height-multiple;
  guide-line-color: mix(@mute-color, @background-color, 10%);
  editor-wrap-to-column: 105;
  item-wrap-to-column: 90;
  editor-wrap-to-column: 80;
  item-wrap-to-column: 60;
}


item[data-type='note'] {
  // paragraph-spacing-after: @font-size;
  font-family: @font-family-note;
   > run[content] {
    background-color: @note-bg-color;
    color: @note-fg-color;
    font-size: @note-font-size;
    font-style: normal;
    // font-size: @user-font-size;
  }
}

run[link] {
  color: @link-color;
  text-decoration: underline;
}

run[link^='button'] {
  color: @mute-color;
  font-weight: normal;
  text-decoration: none;
}

// run[link^="filter"] {
//   color: @mute-color;
//   text-decoration: none;
// }

run[tag],
item[data-type='note'] > run[tag] {
  background-color: @tag-bg-color;
  color: @tag-fg-color;
  font-size: @tag-font-size * 20/16;
  text-decoration: none;
}
/////-------------- Sherwin's contributions below



@color-text: #555555;
@color-text-muted: mix(#555555, @background-color, 50%);
@color-heading: mix(#2600cf, #444444, 50%);
@color-p1: rgb(255, 0, 0);
@color-p2: rgb(224, 62, 62);
@color-p3: rgb(204, 108, 108);
@color-p4: rgb(183, 134, 134);
@color-today: orange;
@color-chore: rgb(196, 178, 88);
@color-break: pink;
@color-internet: lightblue;
@color-due: mix(@color-today, @background-color, 50%);
@color-errand: @color-chore;
@color-deep: green;

@color-p1-muted: mix(@color-p1, @background-color, 50%);
@color-p2-muted: mix(@color-p2, @background-color, 50%);
@color-p3-muted: mix(@color-p3, @background-color, 50%);
@color-p4-muted: mix(@color-p4, @background-color, 50%);
@color-today-muted: mix(@color-today, @background-color, 50%);
@color-chore-muted: mix(@color-chore, @background-color, 50%);
@color-break-muted: mix(@color-break, @background-color, 50%);
@color-internet-muted: mix(@color-internet, @background-color, 50%);
@color-due-muted: mix(@color-due, @background-color, 50%);
@color-errand-muted: mix(@color-errand, @background-color, 50%);
@color-deep-muted: mix(green, @background-color, 50%);

@color-selection: mix(@background-color, @color-text, 85%);

// Typewriter-mode
editor {
  top-padding-percent: 50%;
  left-padding-percent: 20%;
  typewriter-scroll-percent: 30%;
  bottom-padding-percent: 30%;
  selection-background-color: @color-selection;
  invisibles-color: @color-text-muted;
}

// HEADERS
item[data-type=project] {
  font-family: @font-family-header;
  font-weight: 500;
  paragraph-spacing-before: @padding * 1.5;
  paragraph-spacing-after: @padding * 1.5;
  color: mix(@color-heading, @background-color, 65%);
  font-size: @font-size-header * 0.85;
}

// Primary Headers
item[data-type=project].item[depth=1] {
  color: @color-heading;
  font-size: @font-size-header;
}

// Items themselves
item {
  paragraph-spacing-before: @padding;
  paragraph-spacing-after: @padding;
  color: @color-text;
}
item[data-today] {
  font-weight: bold;
  color: #777777; // this color will get overridden by the p1-p4 colors
}
item[data-p1] {
  color: @color-p1;
}
item[data-p2] {
  color: @color-p2;
}
item[data-p3] {
  color: @color-p3;
}
item[data-p4] {
  color: @color-p4;
}


// Tags
run[tag=data-p1] {
  color: @color-p1-muted;
}
run[tag=data-p2] {
  color: @color-p2-muted;
}
run[tag=data-p3] {
  color: @color-p3-muted;
}
run[tag=data-p4] {
  color: @color-p4-muted;
}
run[tag=data-today] {
  color: @color-today;
  font-weight: 900;
  font-size: @tag-font-size * 1.2;
  text-transform: capitalize;
}
run[tag=data-due] {
  color: @color-due;
}
run[tag=data-chore] {
  color: @color-chore;
  font-weight: bold;
}
run[tag=data-errand] {
  color: @color-chore;
  font-weight: bold;
}
run[tag=data-break] {
  color: @color-break;
  font-weight: bold;
}
run[tag=data-internet] {
  color: @color-internet;
  font-weight: bold;
}
run[tag=data-deep] {
  color: @color-deep;
  font-weight: bold;
}
run[tag=data-done] {
  color: @mute-color;
}

// Mute the colors of tags if they're in a DONE item
item[data-done] {
  > run[content] {
    color: @mute-color;
    font-style: italic;
    font-weight: extra-light;

    text-strikethrough-color: @mute-color;
  }
  > run[tag] {
    font-weight: extra-light;
    font-style: italic;
    color: @mute-color;
    text-strikethrough-color: @mute-color;
    text-decoration: strikethrough;
  }
  > run[tag=data-p1] {
    color: @color-p1-muted;
  }
  > run[tag=data-p2] {
    color: @color-p2-muted;
  }
  > run[tag=data-p3] {
    color: @color-p3-muted;
  }
  > run[tag=data-p4] {
    color: @color-p4-muted;
  }
  > run[tag=data-due] {
    color: @color-due-muted;
  }
  > run[tag=data-today] {
    color: @color-today-muted;
  }
  > run[tag=data-chore] {
    color: @color-chore-muted;
  }
  > run[tag=data-errand] {
    color: @color-chore-muted;
  }
  > run[tag=data-break] {
    color: @color-break-muted;
  }
  > run[tag=data-internet] {
    color: @color-internet-muted;
  }
  > run[tag=data-deep] {
    color: @color-deep-muted;
  }
}
